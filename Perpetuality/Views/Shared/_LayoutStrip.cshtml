@using Perpetuality.Data;
@{
    string language = (string)ViewContext.RouteData.Values["language"];
}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/bundledCSS")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>
    <header>
        <h1>Perpetuality</h1>
        <ul id="nav">
        @if (Request.IsAuthenticated)
        {
            <li>
                <a href="/@language/home/profile">@Request.RequestContext.HttpContext.User.Identity.Name</a>
            </li>
            <li>
                <a href="/@language/home/logout">Logout</a>
            </li>
        } else {
            <li>
                <a href="/@language/home/login">@Resources.Shared._Layout.MenuLoginText</a>
            </li>
            <li>
                <a href="/@language/home/register">Register</a>
            </li>
        }
        <li>
            <a href="javascript:void()">@Language.LanguageByAbbreviation(language).LocalName</a>
            <ul>
                @foreach (var lang in Language.Languages)
                {
                    <li>@Html.ActionLink(
                        lang.LocalName, 
                        ViewContext.RouteData.Values["action"].ToString(), 
                        new { language = @lang.Abbreviation })</li>
                }
             </ul>
        </li>
    </ul>
    <div style="clear: both"></div>

    </header>
    

    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
    <script type="text/javascript">
        $(document).ready(function () {
            $('#nav li').hover(
                function () {
                    $('ul', this).stop().slideDown(100);
                },
                function () {
                    $('ul', this).stop().slideUp(100);
                }
            );
        });
    </script>
</body>
</html>
